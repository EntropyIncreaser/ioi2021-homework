我们不难发现每个数都只能到达四个数（当 $H,W$ 有奇数的时候剩下的部分问题不大），这我们记对其中一行的翻转为 $R$，一列的翻转为 $C$。那么考虑一个操作 $RCR^{-1}C^{-1}$（事实上这就是对易子），这个操作手画一下不难发现是对其中三个元素的一个轮换，而对其他元素完全不动。如果你熟悉一点置换群就会知道交错群 $A_n$ 是可以由所有三轮换生成的。因此我们接下来只需考虑奇置换会带来什么。注意到对于奇偶性的改变，操纵 $R$ 和其对称行的 $R$ 是作用一样的，我们接下来只考虑 $H/2, W/2$ 以内的即可。这就是一个方程组 $x_{1,\dots, H/2}$ 和 $y_{1,\dots, W/2}$，要满足 $x_i \oplus y_j = a_{i,j}$，我们任取一颗生成树构造出的解事实上对于这颗生成树就已经完全确定了，只需验证其他边是否都满足即可。最后我们再对于 $A_4$ 的所有 $12$ 种元素确认每个元素的构造方法即可。我的代码给出的构造大概是不超过 $2HW$ 的。
