首先我们注意分到一个大小为 $k$ 的组，那么设一个人到总部的最短路加上总部到它是 $D$，这个组的贡献就是 $(k-1)D$，通过交换法容易证明各个组的 $D$ 值各是一个区间，且按照 $D$ 值递增这个区间长度是递减的，因此我们可知最长的区间不超过 $n/s$，就得到了一个 DP，由于复杂度被调和级数 bound 住，这个是 $O(b^2\log s)$ 的。
