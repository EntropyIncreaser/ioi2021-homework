注意到我们假设最后收缩到一个线段 $[x, y]$，那么反过来考虑，一定是每次将 $x$ 变小或者把 $y$ 变大，因此我们只需枚举一个中点 $m$，取 $<m$ 的一个 LIS 和 $\ge m$ 的一个 LDS 即可，做一个位置变换就可以把这些都算出来。复杂度 $O(n\log n)$。
