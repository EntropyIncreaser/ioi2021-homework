我们考虑计算 $p(x, k)$ 表示这 $n$ 个人里恰有 $k$ 个人的宝石数大于 $x$ 的概率，那么答案就是 $\sum p(x, k) \min(k, r)$ 了。我们考虑一下 EGF，有趣的发现方案数就是 $\left(\frac {1-t^{x+1}}{1-t}\right)^{n-k}\left(\frac {t^{x+1}}{1-t}\right)^k$。因此我们可以通过容斥 $O(d/x)$ 算出一个答案。而对 $k$ 的循环也是只有 $O(d/x)$ 个有贡献的，因此这是个优秀的 $O(d^2)$ 的算法！

然而由于输出浮点数，且这个做法有容斥，所以数值稳定性的劣势使得它根本不能直接通过，即使使用 $\texttt{\_\_float128}$ 也救不了。

所以我直接实现了一个高精度整数，我们在一个 $\texttt{int}$ 里压 $8$ 位，就可以让容斥过程中的数只用不超过 $45$ 个 $\texttt{int}$ 力！于是我们就在 $O(d^2)$ 次高精度乘法的时间内解决了本题！（逃）
